{% extends "base.html" %}

{% block content %}
{% load i18n%}

<div class="todo-container">
    <h1 style="color: white; margin-left: 40%;">{%trans "My To-do List" %}</h1>
    <h6>{% trans "Welcome" %} {{user.username}}</h6>
    

    <div class="todo-search">
        <form method="POST">
            {% csrf_token %}
            {{form.title}}
            <button>{%trans "Add Task" %}</button>
        </form>
    </div>

    <div class="todo-list">

        {% for task in tasks %}

        <div class="todo-list-item">
            <div class="task">
                <input type="checkbox">
                {{task.title}}
            </div>

            <div class="btn-container">
                <div class="edit">
                    <a href="{% url 'update-todo' task.id%}">
                        <i class="fa-solid fa-pen-to-square"></i>
                    </a>
                </div>

                <div class="delete">
                    <a href="{% url 'delete-todo' task.id%}">
                        <i class="fa-solid fa-trash-can"></i>
                    </a>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
    {% include "authentication/logout.html" %}

    <div class="select">
        {% get_current_language as LANGUAGE_CODE %}
        {% get_available_languages as AVAILABLE_LANGUAGES %}
        {% get_language_info_list for AVAILABLE_LANGUAGES as languages %}
         <form action="{% url 'set_language' %}" method="post" class="select">
        {% csrf_token %}
        <select name="language" onchange="this.form.submit()" class="select">
            {% for language in languages %}   
                <option value="{{ language.code }}" {% if language.code == LANGUAGE_CODE %}selected{% endif %}>
                    {{ language.name_local }}
                </option>
                <!-- <option value="{{ language.code }}">
                    {{ language.name_local }}
                </option>  -->
            {% endfor %}
        </select>
        <input type="hidden" name="next" value="{{ request.get_full_path }}">
    </form>
    </div>
</div>
{% endblock content %}



